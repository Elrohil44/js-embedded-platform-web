<div class="ui container">
  <div class="ui top attached recent info message icon" (click)="collapse = !collapse">
    <i class="icon circuit board"></i>
    <div class="content">
      <h1 class="ui header">
        Devices
      </h1>
    </div>
  </div>
  <div [suiCollapse]="collapse">
    <table class="ui bottom attached files single line unstackable selectable table celled padded">
      <thead>
      <tr>
        <th class="single line">
          Endpoint
        </th>
        <th>
          Registration date
        </th>
        <th>
          Last update date
        </th>
        <th>
          Actions
        </th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let device of devices">
        <td class="single line">
          <i class="icon tools black"></i>
          <a routerLink="/device/{{encodeURIComponent(device.endpoint)}}">
            {{device.endpoint}}
          </a>
        </td>
        <td class="collapsing">
          <p>{{device.registeredAt | date:'yyyy-MM-dd HH:mm:ss'}}</p>
        </td>
        <td class="collapsing">
          <p>{{device.updatedAt | date:'yyyy-MM-dd HH:mm:ss'}}</p>
        </td>
        <td class="collapsing">
          <div class="ui buttons">
            <div class="ui button primary" (click)="deviceService.updateFirmware(device.endpoint)">
              <i class="icon repo push"></i> Upload
            </div>
            <div class="ui button primary" (click)="deviceService.restart(device.endpoint)">
              <i class="icon sync"></i> Restart
            </div>
            <div class="ui button primary" suiPopup popupTrigger="focus" popupHeader="Attention" popupText="TODO">
              <i class="icon file text"></i> Logs
            </div>
          </div>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
